<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>TENNIS CD9 2026</title>
<style>
body{
  margin:0;
  font-family: Arial, Helvetica, sans-serif;
  background:#f5f5f5;
}
header{
  background:#000;
  color:#fff;
  text-align:center;
  padding:14px;
  font-weight:bold;
  font-size:20px;
}
nav{
  display:flex;
  background:#000;
}
nav button{
  flex:1;
  padding:12px;
  border:none;
  background:#000;
  color:#fff;
  cursor:pointer;
  font-weight:bold;
}
nav button.active{
  background:#fff;
  color:#000;
}
section{
  display:none;
  padding:20px;
}
section.active{
  display:block;
}
table{
  border-collapse:collapse;
  width:100%;
  background:#fff;
}
th,td{
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
}
th{
  background:#eee;
  font-weight:bold;
}
.title{
  background:#000;
  color:#ffe600;
  font-weight:bold;
  text-align:center;
  padding:8px;
  margin-bottom:10px;
}

.green{ background:#8bc34a; }
.yellow{ background:#fff59d; }
.red{ background:#ffcdd2; }
.blue{ background:#00e5ff; }
.gray{ background:#b0bec5; }

.win{ background:#4caf50; }
.draw{ background:#ffffff; }
.lose{ background:#f44336; }

.select-box{ margin-bottom:10px; }
</style>
</head>

<body>

<header>TENNIS CD9 2026</header>

<nav>
  <button class="active" onclick="showTab('bxh')">BXH</button>
  <button onclick="showTab('matches')">MATCHES</button>
  <button onclick="showTab('teams')">TEAMS</button>
  <button onclick="showTab('pairs')">PAIRS</button>
  <button onclick="showTab('check')">CHECK</button>
</nav>

<!-- BXH -->
<section id="bxh" class="active">
  <div class="title">KẾT QUẢ XẾP HẠNG CÁC ĐỘI</div>
  <table>
    <tr>
      <th>STT</th><th>Đội</th><th>Trận</th><th>Thắng</th><th>Hòa</th><th>Thua</th><th>Hiệu số</th><th>Điểm</th>
    </tr>
    <tr><td>1</td><td>D2</td><td>1</td><td>1</td><td>0</td><td>0</td><td>+5</td><td>3</td></tr>
    <tr><td>2</td><td>D1</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
    <tr><td>3</td><td>D4</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
    <tr><td>4</td><td>D3</td><td>1</td><td>0</td><td>0</td><td>1</td><td>-5</td><td>0</td></tr>
  </table>
</section>

<!-- MATCHES -->
<section id="matches">
  <div class="title">CHI TIẾT KẾT QUẢ TỪNG TRẬN ĐẤU</div>
  <table>
    <tr>
      <th colspan="3" class="green">NGÀY THÁNG NĂM</th>
      <th colspan="4" class="green">DANH SÁCH CÁC CẶP ĐẤU</th>
    </tr>
    <tr>
      <th>Ngày</th><th>Tháng</th><th>Năm</th>
      <th class="green">Sân Ngon</th>
      <th colspan="2" class="yellow">Tỷ số</th>
      <th class="yellow">Sân Mù Mắt</th>
    </tr>
  </table>
</section>

<!-- TEAMS -->
<section id="teams">
  <div class="title">TEAMS</div>
  <table>
    <tr><th>Đội</th><th>Ghi chú</th></tr>
    <tr><td>D1</td><td></td></tr>
    <tr><td>D2</td><td></td></tr>
    <tr><td>D3</td><td></td></tr>
    <tr><td>D4</td><td></td></tr>
  </table>
</section>

<!-- PAIRS -->
<section id="pairs">
  <div class="title">THÔNG TIN CÁC CẶP ĐẤU</div>
  <table id="pairsTable">
    <thead>
      <tr>
        <th></th>
        <th>D1</th>
        <th>D2</th>
        <th>D3</th>
        <th>D4</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<!-- CHECK -->
<section id="check">
  <div class="title">TRA CỨU THỐNG KÊ KẾT QUẢ TỪNG ĐỘI</div>

  <div class="select-box">
    ĐỘI:
    <select id="teamSelect">
      <option value="D1">D1</option>
      <option value="D2" selected>D2</option>
      <option value="D3">D3</option>
      <option value="D4">D4</option>
    </select>
  </div>

  <table>
    <thead>
      <tr>
        <th colspan="3" class="green">NGÀY THÁNG NĂM</th>
        <th colspan="4" class="green">DANH SÁCH CÁC CẶP ĐẤU</th>
        <th>Kết quả</th>
      </tr>
    </thead>
    <tbody id="checkBody"></tbody>
  </table>
</section>

<script>
function showTab(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  event.target.classList.add("active");
}

/* ========= PAIRS FROM GOOGLE SHEET ========= */
const SHEET_ID = "1pak2Yy4rZ3U50rYj2rlfCOkqyDDpnOns";
const GID_PAIRS = "1896492975"; // GID sheet PAIRS
const PAIRS_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${GID_PAIRS}`;
const teams = ["D1","D2","D3","D4"];

function parseCSV(t){
  return t.trim().split("\n").map(r =>
    r.split(",").map(c => c.replace(/^"|"$/g,""))
  );
}
function pairClass(v){
  if(v.includes("Chưa")) return "red";
  if(v.includes("Thiếu")) return "yellow";
  return "green";
}

fetch(PAIRS_URL)
.then(r=>r.text())
.then(txt=>{
  const data = parseCSV(txt).slice(1).map(r=>r.slice(1,5));
  const body = document.querySelector("#pairsTable tbody");
  body.innerHTML = "";
  teams.forEach((t,i)=>{
    let tr = `<tr><th>${t}</th>`;
    teams.forEach((_,j)=>{
      if(i===j){
        tr += `<td></td>`;
      }else{
        const v = data[i][j] || "Chưa đấu";
        tr += `<td class="${pairClass(v)}">${v}</td>`;
      }
    });
    tr += "</tr>";
    body.innerHTML += tr;
  });
});
</script>

</body>
</html>
