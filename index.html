<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>TENNIS ĐỊNH MỆNH CD9 2026</title>

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:#f2f2f2}
header{background:#000;color:#fff;text-align:center;padding:16px;font-size:20px;font-weight:bold}
nav{display:flex;background:#000}
nav button{
  flex:1;
  padding:14px;
  border:none;
  background:#000;
  color:#fff;
  font-weight:bold;
  cursor:pointer
}
nav button.active{background:#fff;color:#000}
section{display:none;padding:20px}
section.active{display:block}

.table-wrap{overflow-x:auto}
table{border-collapse:collapse;width:100%;background:#fff}
th,td{
  border:1px solid #ccc;
  padding:8px;
  text-align:center;
  white-space:nowrap
}
th{background:#eaeaea;font-weight:bold}

.title-bar{
  background:#000;
  color:#ff0;
  font-weight:bold;
  text-align:center;
  padding:10px;
  margin-bottom:10px
}

.red{background:#ffcccc;color:#a40000;font-weight:bold}
.yellow{background:#ffe699;color:#7a4a00;font-weight:bold}
.green{background:#c6efce;color:#006100;font-weight:bold}
</style>
</head>

<body>

<header>TENNIS ĐỊNH MỆNH CD9 2026</header>

<nav>
  <button class="active" onclick="showTab('bxh')">BXH</button>
  <button onclick="showTab('matches')">MATCHES</button>
  <button onclick="showTab('teams')">TEAMS</button>
  <button onclick="showTab('pairs')">PAIRS</button>
  <button onclick="showTab('check')">CHECK</button>
</nav>

<section id="bxh" class="active">
  <div class="title-bar">BẢNG XẾP HẠNG</div>
  <div class="table-wrap"><table id="bxhTable"></table></div>
</section>

<section id="matches">
  <div class="title-bar">CHI TIẾT KẾT QUẢ TỪNG TRẬN</div>
  <div class="table-wrap"><table id="matchesTable"></table></div>
</section>

<section id="teams">
  <div class="title-bar">DANH SÁCH ĐỘI TUYỂN</div>
  <div class="table-wrap"><table id="teamsTable"></table></div>
</section>

<section id="pairs">
  <div class="title-bar">THÔNG TIN CÁC CẶP ĐẤU</div>
  <div class="table-wrap"><table id="pairsTable"></table></div>
</section>

<section id="check">
  <div class="title-bar">CHECK CẶP ĐẤU</div>
  <div class="table-wrap"><table id="checkTable"></table></div>
</section>

<script>
const SHEET_ID = "1pak2Yy4rZ3U50rYj2rlfCOkqyDDpnOns";

const GIDS = {
  bxh: "0",
  matches: "1494947385",
  teams: "1896492975",
  pairs: "123456789",   // đổi đúng gid sheet PAIRS
  check: "987654321"    // đổi đúng gid sheet CHECK
};

function csvURL(gid){
  return `https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${gid}`;
}

function showTab(id){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  event.target.classList.add("active");
}

function renderTable(tableId, data, isCheck=false){
  const table=document.getElementById(tableId);
  table.innerHTML="";
  data.forEach((row,i)=>{
    const tr=document.createElement("tr");
    row.forEach(cell=>{
      const el=document.createElement(i===0?"th":"td");
      let txt=cell.replace(/"/g,"");
      el.textContent=txt;

      if(isCheck && i>0){
        if(txt==="Chưa đấu") el.className="red";
        if(txt.includes("Thiếu")) el.className="yellow";
        if(txt==="Đủ 2 lượt") el.className="green";
      }
      tr.appendChild(el);
    });
    table.appendChild(tr);
  });
}

async function loadSheet(gid, tableId, isCheck=false){
  const res=await fetch(csvURL(gid));
  const text=await res.text();
  const rows=text.trim().split("\n").map(r=>r.split(","));
  renderTable(tableId, rows, isCheck);
}

loadSheet(GIDS.bxh,"bxhTable");
loadSheet(GIDS.matches,"matchesTable");
loadSheet(GIDS.teams,"teamsTable");
loadSheet(GIDS.pairs,"pairsTable");
loadSheet(GIDS.check,"checkTable",true);
</script>

</body>
</html>
